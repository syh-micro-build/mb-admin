var h=(T,g,i)=>new Promise((y,d)=>{var b=l=>{try{c(i.next(l))}catch(p){d(p)}},k=l=>{try{c(i.throw(l))}catch(p){d(p)}},c=l=>l.done?y(l.value):Promise.resolve(l.value).then(b,k);c((i=i.apply(T,g)).next())});import{g as E}from"./index-C3jRJyul.js";import{u as F}from"./useTable-CdBYoZt8.js";import{_ as P}from"./Table.vue_vue_type_script_lang-DndGBm9l.js";import"./index-BAQdSXvC.js";/* empty css                        *//* empty css                    *//* empty css                  *//* empty css               */import{_ as q}from"./Search.vue_vue_type_script_setup_true_lang-BooKpXnk.js";import{_ as I}from"./ContentWrap.vue_vue_type_script_setup_true_lang-oZd6m1Il.js";import{_ as K}from"./Write.vue_vue_type_script_setup_true_lang-CRk3JInB.js";import{_ as M}from"./Detail.vue_vue_type_script_setup_true_lang-Cd7s5Xqt.js";import{_ as Q}from"./Dialog.vue_vue_type_style_index_0_lang-Blbria3l.js";import{_ as n}from"./Button.vue_vue_type_script_setup_true_lang-DlVLngE0.js";import{C as U}from"./element-plus-6v3c1uXT.js";import{q as W,K as S,P as e,Q as x,W as m,r,t as v,v as Y,S as u,u as a,x as j,T as R,Y as z}from"./vue-chunks-DOWhatC1.js";/* empty css                      *//* empty css                  *//* empty css                        *//* empty css                */import"./el-radio-button-DgtI-4KY.js";/* empty css                         */import"./Icon-Bk9gZnpR.js";/* empty css                  */import"./index-CID_UAnn.js";import"./Form-DfYKae86.js";/* empty css                     *//* empty css               *//* empty css                        *//* empty css                   *//* empty css                *//* empty css                    */import"./InputPassword-DaIyn_uS.js";import"./style.css_vue_type_style_index_0_src_true_lang-C2KDv9hB.js";import"./wang-editor-DjPKVaXS.js";import"./JsonEditor.vue_vue_type_script_setup_true_lang-AclZ5RBd.js";import"./IconPicker-BM-vs5bu.js";import"./useForm-D851Kc0i.js";import"./useIcon-Z9q2BnxI.js";import"./useValidator-Nt61Jv1p.js";import"./index-YOSxUlYq.js";import"./tree-Dgaev6Pi.js";import"./Descriptions-MOwYJkgs.js";const G={class:"mb-10px"},It=W({__name:"Role",setup(T){const{tableRegister:g,tableState:i,tableMethods:y}=F({fetchDataApi:()=>h(this,null,function*(){const t=yield E();return{list:t.data.list||[],total:t.data.total}})}),{dataList:d,loading:b,total:k}=i,{getList:c}=y,l=S([{field:"index",label:"序号",type:"index"},{field:"roleName",label:"角色名称"},{field:"status",label:"状态",slots:{default:t=>e(x,null,[e(U,{type:t.row.status===0?"danger":"success"},{default:()=>[t.row.status===1?"启用":"禁用"]})])}},{field:"createTime",label:"创建时间"},{field:"remark",label:"备注"},{field:"action",label:"操作",width:240,slots:{default:t=>{const o=t.row;return e(x,null,[e(n,{type:"primary",onClick:()=>N(o,"edit")},{default:()=>[m("编辑")]}),e(n,{type:"success",onClick:()=>N(o,"detail")},{default:()=>[m("详情")]}),e(n,{type:"danger"},{default:()=>[m("删除")]})])}}}]),p=S([{field:"roleName",label:"角色名称",component:"Input"}]),A=r({}),V=t=>{A.value=t,c()},s=r(!1),w=r(""),f=r(),_=r(""),$=r(),C=r(!1),N=(t,o)=>{w.value=o==="edit"?"编辑":"详情",_.value=o,f.value=t,s.value=!0},L=()=>{w.value="新增",f.value=void 0,s.value=!0,_.value=""},D=()=>h(this,null,function*(){const t=a($);(yield t==null?void 0:t.submit())&&(C.value=!0,setTimeout(()=>{C.value=!1,s.value=!1},1e3))});return(t,o)=>(v(),Y(x,null,[e(a(I),null,{default:u(()=>[e(a(q),{schema:p,onReset:V,onSearch:V},null,8,["schema"]),j("div",G,[e(a(n),{type:"primary",onClick:L},{default:u(()=>[m("新增")]),_:1})]),e(a(P),{columns:l,"default-expand-all":"","node-key":"id",data:a(d),loading:a(b),pagination:{total:a(k)},onRegister:a(g)},null,8,["columns","data","loading","pagination","onRegister"])]),_:1}),e(a(Q),{modelValue:s.value,"onUpdate:modelValue":o[1]||(o[1]=B=>s.value=B),title:w.value},{footer:u(()=>[_.value!=="detail"?(v(),R(a(n),{key:0,type:"primary",loading:C.value,onClick:D},{default:u(()=>[m(" 保存 ")]),_:1},8,["loading"])):z("",!0),e(a(n),{onClick:o[0]||(o[0]=B=>s.value=!1)},{default:u(()=>[m("关闭")]),_:1})]),default:u(()=>[_.value!=="detail"?(v(),R(K,{key:0,ref_key:"writeRef",ref:$,"current-row":f.value},null,8,["current-row"])):(v(),R(M,{key:1,"current-row":f.value},null,8,["current-row"]))]),_:1},8,["modelValue","title"])],64))}});export{It as default};
