var o=(l,w,r)=>new Promise((s,c)=>{var g=n=>{try{u(r.next(n))}catch(d){c(d)}},h=n=>{try{u(r.throw(n))}catch(d){c(d)}},u=n=>n.done?s(n.value):Promise.resolve(n.value).then(g,h);u((r=r.apply(l,w)).next())});import"./Table.vue_vue_type_script_lang-Blx9yiSI.js";import"./index-B84MQcLW.js";/* empty css                        *//* empty css                    *//* empty css                  */import{j as T,E as C}from"./element-plus-ByljZuZM.js";import{r as f,w as y,u as a,o as b,n as x}from"./vue-chunks-DjkM_pWB.js";const z=l=>{const{immediate:w=!0}=l,r=f(!1),s=f(1),c=f(10),g=f(0),h=f([]);let u=!1;y(()=>s.value,()=>{u||m.getList(),u=!1}),y(()=>c.value,()=>{a(s)===1||(s.value=1,u=!0),m.getList()}),b(()=>{w&&m.getList()});const n=f(),d=f(),v=(e,t)=>{n.value=e,d.value=a(t)},p=()=>o(void 0,null,function*(){yield x();const e=a(n);return e||console.error("The table is not registered. Please use the register method to register"),e}),m={getList:()=>o(void 0,null,function*(){r.value=!0;try{const e=yield l==null?void 0:l.fetchDataApi();e&&(h.value=e.list,g.value=e.total||0)}catch(e){}finally{r.value=!1}}),setProps:(...t)=>o(void 0,[...t],function*(e={}){const i=yield p();i==null||i.setProps(e)}),setColumn:e=>o(void 0,null,function*(){const t=yield p();t==null||t.setColumn(e)}),addColumn:(e,t)=>o(void 0,null,function*(){const i=yield p();i==null||i.addColumn(e,t)}),delColumn:e=>o(void 0,null,function*(){const t=yield p();t==null||t.delColumn(e)}),getElTableExpose:()=>o(void 0,null,function*(){return yield p(),a(d)}),refresh:()=>{m.getList()},delList:e=>o(void 0,null,function*(){const{fetchDelApi:t}=l;if(!t){console.warn("fetchDelApi is undefined");return}T.confirm("是否删除所选中数据？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>o(void 0,null,function*(){if(yield t()){C.success("删除成功");const L=a(g)%a(c)===e||a(c)===1?a(s)>1?a(s)-1:a(s):a(s);s.value=L,m.getList()}}))})};return{tableRegister:v,tableMethods:m,tableState:{currentPage:s,pageSize:c,total:g,dataList:h,loading:r}}};export{z as u};
