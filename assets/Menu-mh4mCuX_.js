var V=(T,y,s)=>new Promise((w,v)=>{var b=l=>{try{p(s.next(l))}catch(d){v(d)}},k=l=>{try{p(s.throw(l))}catch(d){v(d)}},p=l=>l.done?w(l.value):Promise.resolve(l.value).then(b,k);p((s=s.apply(T,y)).next())});import{g as D}from"./index-Bqxi_gAk.js";import{u as E}from"./useTable-XlE8EToQ.js";import{_ as F}from"./Table.vue_vue_type_script_lang-CNx8FBJ-.js";import{I as M}from"./index-fPquPYKy.js";/* empty css                        *//* empty css                    */import"./el-tooltip-l0sNRNKZ.js";/* empty css               */import{_ as H}from"./Search.vue_vue_type_script_setup_true_lang-PVu_BdCY.js";import{_ as P}from"./ContentWrap.vue_vue_type_script_setup_true_lang-CuK79ptc.js";import{_ as z}from"./Write.vue_vue_type_script_setup_true_lang-CVkHoHJT.js";import{_ as K}from"./Detail.vue_vue_type_script_setup_true_lang-BzByzuUp.js";import{_ as O}from"./Dialog.vue_vue_type_style_index_0_lang-1-PPIRfH.js";import{_ as n}from"./Button.vue_vue_type_script_setup_true_lang-COt6HsEg.js";import{H as U}from"./element-plus-BuBGixiZ.js";import{y as W,W as I,O as a,I as u,a4 as m,r,z as g,A as j,L as c,u as o,D as q,K as $,H as R}from"./vue-chunks-CaTGQ7j2.js";/* empty css                      *//* empty css                  *//* empty css                        *//* empty css                */import"./el-radio-button-BoxksoYn.js";/* empty css                  */import"./index-DIHpkI20.js";import"./Form-DpvqyXPX.js";/* empty css                     *//* empty css               *//* empty css                        *//* empty css                   *//* empty css                *//* empty css                    */import"./InputPassword-DYDUEPhR.js";import"./style.css_vue_type_style_index_0_src_true_lang-DT-CyGQf.js";import"./wang-editor-DiNEBF7K.js";import"./JsonEditor.vue_vue_type_script_setup_true_lang-C3-E0J_5.js";import"./IconPicker-ChwCay8l.js";import"./useForm-6Kre_2Ms.js";import"./useIcon-D7bfBa5u.js";import"./useValidator-Nt61Jv1p.js";import"./AddButtonPermission.vue_vue_type_script_setup_true_lang-Dm2CGQHJ.js";import"./Descriptions-DPKMvHcX.js";const G={class:"mb-10px"},Et=W({__name:"Menu",setup(T){const{tableRegister:y,tableState:s,tableMethods:w}=E({fetchDataApi:()=>V(this,null,function*(){return{list:(yield D()).data.list||[]}})}),{dataList:v,loading:b}=s,{getList:k}=w,p=I([{field:"index",label:"序号",type:"index"},{field:"meta.title",label:"菜单名称",slots:{default:e=>{const t=e.row.meta.title;return a(u,null,[t])}}},{field:"meta.icon",label:"图标",slots:{default:e=>{const t=e.row.meta.icon;return t?a(u,null,[a(M,{icon:t},null)]):null}}},{field:"component",label:"组件",slots:{default:e=>{const t=e.row.component;return a(u,null,[t==="#"?"顶级目录":t==="##"?"子目录":t])}}},{field:"path",label:"路径"},{field:"status",label:"状态",slots:{default:e=>a(u,null,[a(U,{type:e.row.status===0?"danger":"success"},{default:()=>[e.row.status===1?"启用":"禁用"]})])}},{field:"action",label:"操作",width:240,slots:{default:e=>{const t=e.row;return a(u,null,[a(n,{type:"primary",onClick:()=>L(t,"edit")},{default:()=>[m("编辑")]}),a(n,{type:"success",onClick:()=>L(t,"detail")},{default:()=>[m("详情")]}),a(n,{type:"danger"},{default:()=>[m("删除")]})])}}}]),l=I([{field:"meta.title",label:"菜单名称",component:"Input"}]),d=r({}),A=e=>{d.value=e,k()},i=r(!1),C=r(""),_=r(),f=r(""),B=r(),x=r(!1),L=(e,t)=>{C.value=t==="edit"?"编辑":"详情",f.value=t,_.value=e,i.value=!0},N=()=>{C.value="新增",_.value=void 0,i.value=!0,f.value=""},S=()=>V(this,null,function*(){const e=o(B),t=yield e==null?void 0:e.submit();t&&(x.value=!0,setTimeout(()=>{x.value=!1,i.value=!1},1e3))});return(e,t)=>(g(),j(u,null,[a(o(P),null,{default:c(()=>[a(o(H),{schema:l,onReset:A,onSearch:A},null,8,["schema"]),q("div",G,[a(o(n),{type:"primary",onClick:N},{default:c(()=>t[2]||(t[2]=[m("新增")])),_:1})]),a(o(F),{columns:p,"default-expand-all":"","node-key":"id",data:o(v),loading:o(b),onRegister:o(y)},null,8,["columns","data","loading","onRegister"])]),_:1}),a(o(O),{modelValue:i.value,"onUpdate:modelValue":t[1]||(t[1]=h=>i.value=h),title:C.value},{footer:c(()=>[f.value!=="detail"?(g(),$(o(n),{key:0,type:"primary",loading:x.value,onClick:S},{default:c(()=>t[3]||(t[3]=[m(" 保存 ")])),_:1},8,["loading"])):R("",!0),a(o(n),{onClick:t[0]||(t[0]=h=>i.value=!1)},{default:c(()=>t[4]||(t[4]=[m("关闭")])),_:1})]),default:c(()=>[f.value!=="detail"?(g(),$(z,{key:0,ref_key:"writeRef",ref:B,"current-row":_.value},null,8,["current-row"])):R("",!0),f.value==="detail"?(g(),$(K,{key:1,"current-row":_.value},null,8,["current-row"])):R("",!0)]),_:1},8,["modelValue","title"])],64))}});export{Et as default};
