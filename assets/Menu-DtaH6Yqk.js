var V=(T,y,i)=>new Promise((w,v)=>{var b=l=>{try{c(i.next(l))}catch(d){v(d)}},k=l=>{try{c(i.throw(l))}catch(d){v(d)}},c=l=>l.done?w(l.value):Promise.resolve(l.value).then(b,k);c((i=i.apply(T,y)).next())});import{g as D}from"./index-B0iqIoRo.js";import{u as E}from"./useTable-BVJewu7O.js";import{_ as F}from"./Table.vue_vue_type_script_lang-BvrGciW0.js";import"./index-B3XF_MSj.js";/* empty css                        *//* empty css                    *//* empty css                  *//* empty css               */import{I as M}from"./Icon-PeQWWwC1.js";import{_ as P}from"./Search.vue_vue_type_script_setup_true_lang-C52xCsVk.js";import{_ as z}from"./ContentWrap.vue_vue_type_script_setup_true_lang-qfuOrnYu.js";import{_ as H}from"./Write.vue_vue_type_script_setup_true_lang-vgMfjJJD.js";import{_ as K}from"./Detail.vue_vue_type_script_setup_true_lang-Dq14udkz.js";import{_ as O}from"./Dialog.vue_vue_type_style_index_0_lang-DL3gYN61.js";import{_ as n}from"./Button.vue_vue_type_script_setup_true_lang-LFqjB6-P.js";import{C as U}from"./element-plus-ByljZuZM.js";import{y as W,W as I,O as o,I as u,a4 as m,r,z as g,A as j,L as p,u as a,D as q,K as $,H as R}from"./vue-chunks-DjkM_pWB.js";/* empty css                      *//* empty css                  *//* empty css                        *//* empty css                */import"./el-radio-button-IzgB4uqe.js";/* empty css                         *//* empty css                  */import"./index-wHDMSkBu.js";import"./Form-DD94FbQq.js";/* empty css                     *//* empty css               *//* empty css                        *//* empty css                   *//* empty css                *//* empty css                    */import"./InputPassword-BadLQN9x.js";import"./style.css_vue_type_style_index_0_src_true_lang-saZwRuUM.js";import"./wang-editor-Osncebl8.js";import"./JsonEditor.vue_vue_type_script_setup_true_lang-ChIb-EYQ.js";import"./IconPicker-CGw4bg4I.js";import"./useForm-B4UpeciK.js";import"./useIcon-DWxKCE_n.js";import"./useValidator-Nt61Jv1p.js";import"./AddButtonPermission.vue_vue_type_script_setup_true_lang-C6ZEQ856.js";import"./Descriptions-DcJXti__.js";const G={class:"mb-10px"},Mt=W({__name:"Menu",setup(T){const{tableRegister:y,tableState:i,tableMethods:w}=E({fetchDataApi:()=>V(this,null,function*(){return{list:(yield D()).data.list||[]}})}),{dataList:v,loading:b}=i,{getList:k}=w,c=I([{field:"index",label:"序号",type:"index"},{field:"meta.title",label:"菜单名称",slots:{default:e=>{const t=e.row.meta.title;return o(u,null,[t])}}},{field:"meta.icon",label:"图标",slots:{default:e=>{const t=e.row.meta.icon;return t?o(u,null,[o(M,{icon:t},null)]):null}}},{field:"component",label:"组件",slots:{default:e=>{const t=e.row.component;return o(u,null,[t==="#"?"顶级目录":t==="##"?"子目录":t])}}},{field:"path",label:"路径"},{field:"status",label:"状态",slots:{default:e=>o(u,null,[o(U,{type:e.row.status===0?"danger":"success"},{default:()=>[e.row.status===1?"启用":"禁用"]})])}},{field:"action",label:"操作",width:240,slots:{default:e=>{const t=e.row;return o(u,null,[o(n,{type:"primary",onClick:()=>L(t,"edit")},{default:()=>[m("编辑")]}),o(n,{type:"success",onClick:()=>L(t,"detail")},{default:()=>[m("详情")]}),o(n,{type:"danger"},{default:()=>[m("删除")]})])}}}]),l=I([{field:"meta.title",label:"菜单名称",component:"Input"}]),d=r({}),A=e=>{d.value=e,k()},s=r(!1),C=r(""),_=r(),f=r(""),B=r(),x=r(!1),L=(e,t)=>{C.value=t==="edit"?"编辑":"详情",f.value=t,_.value=e,s.value=!0},N=()=>{C.value="新增",_.value=void 0,s.value=!0,f.value=""},S=()=>V(this,null,function*(){const e=a(B),t=yield e==null?void 0:e.submit();t&&(x.value=!0,setTimeout(()=>{x.value=!1,s.value=!1},1e3))});return(e,t)=>(g(),j(u,null,[o(a(z),null,{default:p(()=>[o(a(P),{schema:l,onReset:A,onSearch:A},null,8,["schema"]),q("div",G,[o(a(n),{type:"primary",onClick:N},{default:p(()=>t[2]||(t[2]=[m("新增")])),_:1})]),o(a(F),{columns:c,"default-expand-all":"","node-key":"id",data:a(v),loading:a(b),onRegister:a(y)},null,8,["columns","data","loading","onRegister"])]),_:1}),o(a(O),{modelValue:s.value,"onUpdate:modelValue":t[1]||(t[1]=h=>s.value=h),title:C.value},{footer:p(()=>[f.value!=="detail"?(g(),$(a(n),{key:0,type:"primary",loading:x.value,onClick:S},{default:p(()=>t[3]||(t[3]=[m(" 保存 ")])),_:1},8,["loading"])):R("",!0),o(a(n),{onClick:t[0]||(t[0]=h=>s.value=!1)},{default:p(()=>t[4]||(t[4]=[m("关闭")])),_:1})]),default:p(()=>[f.value!=="detail"?(g(),$(H,{key:0,ref_key:"writeRef",ref:B,"current-row":_.value},null,8,["current-row"])):R("",!0),f.value==="detail"?(g(),$(K,{key:1,"current-row":_.value},null,8,["current-row"])):R("",!0)]),_:1},8,["modelValue","title"])],64))}});export{Mt as default};
