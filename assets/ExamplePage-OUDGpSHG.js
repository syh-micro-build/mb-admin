var F=Object.defineProperty;var L=Object.getOwnPropertySymbols;var I=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable;var R=(r,o,t)=>o in r?F(r,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[o]=t,A=(r,o)=>{for(var t in o||(o={}))I.call(o,t)&&R(r,t,o[t]);if(L)for(var t of L(o))M.call(o,t)&&R(r,t,o[t]);return r};var b=(r,o,t)=>new Promise((f,p)=>{var _=l=>{try{m(t.next(l))}catch(d){p(d)}},g=l=>{try{m(t.throw(l))}catch(d){p(d)}},m=l=>l.done?f(l.value):Promise.resolve(l.value).then(_,g);m((t=t.apply(r,o)).next())});import{_ as N}from"./ContentWrap.vue_vue_type_script_setup_true_lang-DcZkGUJO.js";import{_ as V}from"./Search.vue_vue_type_script_setup_true_lang-CEl_fCSC.js";import"./index-B8m1DCcH.js";/* empty css               */import{_ as Y}from"./Table.vue_vue_type_script_lang-C6kPEYDC.js";/* empty css                        *//* empty css                    *//* empty css                  */import{g as H,d as U}from"./index-BntdM2FD.js";import{u as q}from"./useTable-Bt3jlHM3.js";import{q as J,aA as O,r as S,J as j,O as n,V as c,P as G,u as a,t as K,S as Q,R as P,x as W,i as E}from"./vue-chunks-CrLAACUV.js";import{u as X}from"./useEventBus-CKmVS07N.js";import{u as Z}from"./useCrudSchemas-B-xaNBdY.js";import{_ as u}from"./Button.vue_vue_type_script_setup_true_lang-D451fIGp.js";import{C as ee}from"./element-plus-Dmwbteg1.js";import"./Icon-C_xGsnI1.js";/* empty css                */import"./Form-BnA0udkH.js";/* empty css                     *//* empty css               */import"./el-radio-button-C-Rnj1T4.js";/* empty css                        *//* empty css                  *//* empty css                   *//* empty css                *//* empty css                    */import"./InputPassword-dseFeR22.js";import"./style.css_vue_type_style_index_0_src_true_lang-BMQRWtaP.js";import"./wang-editor-FQ26JwTT.js";import"./JsonEditor.vue_vue_type_script_setup_true_lang-DAhjxTyq.js";import"./IconPicker-DLv5cb2d.js";/* empty css                      */import"./useForm-CnQ_DNHd.js";import"./useIcon-DYQA8GoJ.js";/* empty css                        *//* empty css                         *//* empty css                  */import"./index-lvZ0sBpj.js";import"./tree-Dgaev6Pi.js";const te={class:"mb-10px"},He=J({name:"ExamplePage",__name:"ExamplePage",setup(r){const{push:o}=O(),t=S([]),f=S({}),p=e=>{f.value=e,y()},{tableRegister:_,tableState:g,tableMethods:m}=q({fetchDataApi:()=>b(this,null,function*(){const{currentPage:e,pageSize:i}=g,s=yield H(A({pageIndex:a(e),pageSize:a(i)},a(f)));return{list:s.data.list,total:s.data.total}}),fetchDelApi:()=>b(this,null,function*(){return!!(yield U(a(t)))})}),{loading:l,dataList:d,total:$,currentPage:h,pageSize:v}=g,{getList:y,getElTableExpose:z,delList:D}=m;y(),X({name:"getList",callback:e=>{e==="add"&&(h.value=1),y()}});const T=j([{field:"selection",search:{hidden:!0},form:{hidden:!0},detail:{hidden:!0},table:{type:"selection"}},{field:"index",label:"序号",type:"index",search:{hidden:!0},form:{hidden:!0},detail:{hidden:!0}},{field:"title",label:"标题",search:{component:"Input"},form:{component:"Input",colProps:{span:24}},detail:{span:24}},{field:"author",label:"作者",search:{hidden:!0}},{field:"display_time",label:"创建时间",search:{hidden:!0},form:{component:"DatePicker",componentProps:{type:"datetime",valueFormat:"YYYY-MM-DD HH:mm:ss"}}},{field:"importance",label:"重要性",search:{hidden:!0},form:{component:"Select",componentProps:{style:{width:"100%"},options:[{label:"重要",value:3},{label:"良好",value:2},{label:"一般",value:1}]}},detail:{slots:{default:e=>n(ee,{type:e.importance===1?"success":e.importance===2?"warning":"danger"},{default:()=>[e.importance===1?"重要":e.importance===2?"良好":"	一般"]})}}},{field:"pageviews",label:"阅读数",search:{hidden:!0},form:{component:"InputNumber",value:0}},{field:"content",label:"内容",search:{hidden:!0},table:{show:!1},form:{component:"Editor",colProps:{span:24}},detail:{span:24,slots:{default:e=>n("div",{innerHTML:e.content},null)}}},{field:"action",width:"260px",label:"操作",search:{hidden:!0},form:{hidden:!0},detail:{hidden:!0},table:{slots:{default:e=>n(G,null,[n(u,{type:"primary",onClick:()=>k(e.row,"edit")},{default:()=>[c("编辑")]}),n(u,{type:"success",onClick:()=>k(e.row,"detail")},{default:()=>[c("详情")]}),n(u,{type:"danger",onClick:()=>C(e.row)},{default:()=>[c("删除")]})])}}}]),{allSchemas:w}=Z(T),B=()=>{o("/example/example-add")},x=S(!1),C=e=>b(this,null,function*(){const i=yield z();t.value=e?[e.id]:(i==null?void 0:i.getSelectionRows().map(s=>s.id))||[],x.value=!0,yield D(a(t).length).finally(()=>{x.value=!1})}),k=(e,i)=>{o(`/example/example-${i}?id=${e.id}`)};return(e,i)=>(K(),Q(a(N),null,{default:P(()=>[n(a(V),{schema:a(w).searchSchema,onSearch:p,onReset:p},null,8,["schema"]),W("div",te,[n(a(u),{type:"primary",onClick:B},{default:P(()=>[c("新增")]),_:1}),n(a(u),{loading:x.value,type:"danger",onClick:i[0]||(i[0]=s=>C(null))},{default:P(()=>[c(" 删除 ")]),_:1},8,["loading"])]),n(a(Y),{pageSize:a(v),"onUpdate:pageSize":i[1]||(i[1]=s=>E(v)?v.value=s:null),currentPage:a(h),"onUpdate:currentPage":i[2]||(i[2]=s=>E(h)?h.value=s:null),columns:a(w).tableColumns,data:a(d),loading:a(l),pagination:{total:a($)},onRegister:a(_)},null,8,["pageSize","currentPage","columns","data","loading","pagination","onRegister"])]),_:1}))}});export{He as default};
