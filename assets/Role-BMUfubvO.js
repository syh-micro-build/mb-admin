var R=($,g,i)=>new Promise((y,f)=>{var b=l=>{try{p(i.next(l))}catch(d){f(d)}},k=l=>{try{p(i.throw(l))}catch(d){f(d)}},p=l=>l.done?y(l.value):Promise.resolve(l.value).then(b,k);p((i=i.apply($,g)).next())});import{g as E}from"./index-jxEITdWu.js";import{u as F}from"./useTable-XlE8EToQ.js";import{_ as H}from"./Table.vue_vue_type_script_lang-CNx8FBJ-.js";import"./index-fPquPYKy.js";/* empty css                        *//* empty css                    */import"./el-tooltip-l0sNRNKZ.js";/* empty css               */import{_ as I}from"./Search.vue_vue_type_script_setup_true_lang-PVu_BdCY.js";import{_ as P}from"./ContentWrap.vue_vue_type_script_setup_true_lang-CuK79ptc.js";import{_ as z}from"./Write.vue_vue_type_script_setup_true_lang-DM71uYgG.js";import{_ as K}from"./Detail.vue_vue_type_script_setup_true_lang-CmQpycyf.js";import{_ as M}from"./Dialog.vue_vue_type_style_index_0_lang-1-PPIRfH.js";import{_ as n}from"./Button.vue_vue_type_script_setup_true_lang-COt6HsEg.js";import{H as O}from"./element-plus-BuBGixiZ.js";import{y as U,W as L,O as a,I as x,a4 as m,r,z as v,A as W,L as u,u as o,D as j,K as V,H as q}from"./vue-chunks-CaTGQ7j2.js";/* empty css                      *//* empty css                  *//* empty css                        *//* empty css                */import"./el-radio-button-BoxksoYn.js";/* empty css                  */import"./index-DIHpkI20.js";import"./Form-DpvqyXPX.js";/* empty css                     *//* empty css               *//* empty css                        *//* empty css                   *//* empty css                *//* empty css                    */import"./InputPassword-DYDUEPhR.js";import"./style.css_vue_type_style_index_0_src_true_lang-DT-CyGQf.js";import"./wang-editor-DiNEBF7K.js";import"./JsonEditor.vue_vue_type_script_setup_true_lang-C3-E0J_5.js";import"./IconPicker-ChwCay8l.js";import"./useForm-6Kre_2Ms.js";import"./useIcon-D7bfBa5u.js";import"./useValidator-Nt61Jv1p.js";import"./index-Bqxi_gAk.js";import"./tree-V8lrdewf.js";import"./Descriptions-DPKMvHcX.js";const G={class:"mb-10px"},Ht=U({__name:"Role",setup($){const{tableRegister:g,tableState:i,tableMethods:y}=F({fetchDataApi:()=>R(this,null,function*(){const e=yield E();return{list:e.data.list||[],total:e.data.total}})}),{dataList:f,loading:b,total:k}=i,{getList:p}=y,l=L([{field:"index",label:"序号",type:"index"},{field:"roleName",label:"角色名称"},{field:"status",label:"状态",slots:{default:e=>a(x,null,[a(O,{type:e.row.status===0?"danger":"success"},{default:()=>[e.row.status===1?"启用":"禁用"]})])}},{field:"createTime",label:"创建时间"},{field:"remark",label:"备注"},{field:"action",label:"操作",width:240,slots:{default:e=>{const t=e.row;return a(x,null,[a(n,{type:"primary",onClick:()=>A(t,"edit")},{default:()=>[m("编辑")]}),a(n,{type:"success",onClick:()=>A(t,"detail")},{default:()=>[m("详情")]}),a(n,{type:"danger"},{default:()=>[m("删除")]})])}}}]),d=L([{field:"roleName",label:"角色名称",component:"Input"}]),D=r({}),T=e=>{D.value=e,p()},s=r(!1),w=r(""),c=r(),_=r(""),N=r(),C=r(!1),A=(e,t)=>{w.value=t==="edit"?"编辑":"详情",_.value=t,c.value=e,s.value=!0},S=()=>{w.value="新增",c.value=void 0,s.value=!0,_.value=""},h=()=>R(this,null,function*(){const e=o(N);(yield e==null?void 0:e.submit())&&(C.value=!0,setTimeout(()=>{C.value=!1,s.value=!1},1e3))});return(e,t)=>(v(),W(x,null,[a(o(P),null,{default:u(()=>[a(o(I),{schema:d,onReset:T,onSearch:T},null,8,["schema"]),j("div",G,[a(o(n),{type:"primary",onClick:S},{default:u(()=>t[2]||(t[2]=[m("新增")])),_:1})]),a(o(H),{columns:l,"default-expand-all":"","node-key":"id",data:o(f),loading:o(b),pagination:{total:o(k)},onRegister:o(g)},null,8,["columns","data","loading","pagination","onRegister"])]),_:1}),a(o(M),{modelValue:s.value,"onUpdate:modelValue":t[1]||(t[1]=B=>s.value=B),title:w.value},{footer:u(()=>[_.value!=="detail"?(v(),V(o(n),{key:0,type:"primary",loading:C.value,onClick:h},{default:u(()=>t[3]||(t[3]=[m(" 保存 ")])),_:1},8,["loading"])):q("",!0),a(o(n),{onClick:t[0]||(t[0]=B=>s.value=!1)},{default:u(()=>t[4]||(t[4]=[m("关闭")])),_:1})]),default:u(()=>[_.value!=="detail"?(v(),V(z,{key:0,ref_key:"writeRef",ref:N,"current-row":c.value},null,8,["current-row"])):(v(),V(K,{key:1,"current-row":c.value},null,8,["current-row"]))]),_:1},8,["modelValue","title"])],64))}});export{Ht as default};
