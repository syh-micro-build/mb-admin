var I=Object.defineProperty;var L=Object.getOwnPropertySymbols;var F=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable;var z=(r,i,t)=>i in r?I(r,i,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[i]=t,A=(r,i)=>{for(var t in i||(i={}))F.call(i,t)&&z(r,t,i[t]);if(L)for(var t of L(i))M.call(i,t)&&z(r,t,i[t]);return r};var b=(r,i,t)=>new Promise((f,p)=>{var v=l=>{try{m(t.next(l))}catch(d){p(d)}},g=l=>{try{m(t.throw(l))}catch(d){p(d)}},m=l=>l.done?f(l.value):Promise.resolve(l.value).then(v,g);m((t=t.apply(r,i)).next())});import{_ as N}from"./ContentWrap.vue_vue_type_script_setup_true_lang-BItnywpV.js";import{_ as Y}from"./Search.vue_vue_type_script_setup_true_lang-D4DYLpY6.js";import"./index-BBmQI_oC.js";/* empty css               */import{_ as H}from"./Table.vue_vue_type_script_lang-C0r7c0ew.js";/* empty css                        *//* empty css                    *//* empty css                  */import{g as V,d as U}from"./index-DnwszBtb.js";import{u as K}from"./useTable-CT-lvOVv.js";import{y as O,aA as W,r as S,W as j,O as n,a4 as u,I as q,u as o,z as G,K as J,L as P,D as Q,l as D}from"./vue-chunks-ChjHxF1G.js";import{u as X}from"./useEventBus-CGLr9wTq.js";import{u as Z}from"./useCrudSchemas-DdqHtvsp.js";import{_ as c}from"./Button.vue_vue_type_script_setup_true_lang-CuGySp94.js";import{C as ee}from"./element-plus-CUBv5pjL.js";import"./Icon-Dh_B1bNg.js";/* empty css                */import"./Form-bdmprofG.js";/* empty css                     *//* empty css               */import"./el-radio-button-C55A0vnX.js";/* empty css                        *//* empty css                  *//* empty css                   *//* empty css                *//* empty css                    */import"./InputPassword-Fzr5t1dl.js";import"./style.css_vue_type_style_index_0_src_true_lang-BSqpnxM3.js";import"./wang-editor-qsc5EwLN.js";import"./JsonEditor.vue_vue_type_script_setup_true_lang-DoGRMYw8.js";import"./IconPicker-BPgSRXFD.js";/* empty css                      */import"./useForm-C9ziAzil.js";import"./useIcon-CIWTvLDx.js";/* empty css                        *//* empty css                         *//* empty css                  */import"./index-C9tA9pdX.js";import"./tree-Dgaev6Pi.js";const te={class:"mb-10px"},Ve=O({name:"ExamplePage",__name:"ExamplePage",setup(r){const{push:i}=W(),t=S([]),f=S({}),p=e=>{f.value=e,_()},{tableRegister:v,tableState:g,tableMethods:m}=K({fetchDataApi:()=>b(this,null,function*(){const{currentPage:e,pageSize:a}=g,s=yield V(A({pageIndex:o(e),pageSize:o(a)},o(f)));return{list:s.data.list,total:s.data.total}}),fetchDelApi:()=>b(this,null,function*(){return!!(yield U(o(t)))})}),{loading:l,dataList:d,total:E,currentPage:h,pageSize:y}=g,{getList:_,getElTableExpose:R,delList:$}=m;_(),X({name:"getList",callback:e=>{e==="add"&&(h.value=1),_()}});const T=j([{field:"selection",search:{hidden:!0},form:{hidden:!0},detail:{hidden:!0},table:{type:"selection"}},{field:"index",label:"序号",type:"index",search:{hidden:!0},form:{hidden:!0},detail:{hidden:!0}},{field:"title",label:"标题",search:{component:"Input"},form:{component:"Input",colProps:{span:24}},detail:{span:24}},{field:"author",label:"作者",search:{hidden:!0}},{field:"display_time",label:"创建时间",search:{hidden:!0},form:{component:"DatePicker",componentProps:{type:"datetime",valueFormat:"YYYY-MM-DD HH:mm:ss"}}},{field:"importance",label:"重要性",search:{hidden:!0},form:{component:"Select",componentProps:{style:{width:"100%"},options:[{label:"重要",value:3},{label:"良好",value:2},{label:"一般",value:1}]}},detail:{slots:{default:e=>n(ee,{type:e.importance===1?"success":e.importance===2?"warning":"danger"},{default:()=>[e.importance===1?"重要":e.importance===2?"良好":"	一般"]})}}},{field:"pageviews",label:"阅读数",search:{hidden:!0},form:{component:"InputNumber",value:0}},{field:"content",label:"内容",search:{hidden:!0},table:{show:!1},form:{component:"Editor",colProps:{span:24}},detail:{span:24,slots:{default:e=>n("div",{innerHTML:e.content},null)}}},{field:"action",width:"260px",label:"操作",search:{hidden:!0},form:{hidden:!0},detail:{hidden:!0},table:{slots:{default:e=>n(q,null,[n(c,{type:"primary",onClick:()=>k(e.row,"edit")},{default:()=>[u("编辑")]}),n(c,{type:"success",onClick:()=>k(e.row,"detail")},{default:()=>[u("详情")]}),n(c,{type:"danger",onClick:()=>C(e.row)},{default:()=>[u("删除")]})])}}}]),{allSchemas:w}=Z(T),B=()=>{i("/example/example-add")},x=S(!1),C=e=>b(this,null,function*(){const a=yield R();t.value=e?[e.id]:(a==null?void 0:a.getSelectionRows().map(s=>s.id))||[],x.value=!0,yield $(o(t).length).finally(()=>{x.value=!1})}),k=(e,a)=>{i(`/example/example-${a}?id=${e.id}`)};return(e,a)=>(G(),J(o(N),null,{default:P(()=>[n(o(Y),{schema:o(w).searchSchema,onSearch:p,onReset:p},null,8,["schema"]),Q("div",te,[n(o(c),{type:"primary",onClick:B},{default:P(()=>a[3]||(a[3]=[u("新增")])),_:1}),n(o(c),{loading:x.value,type:"danger",onClick:a[0]||(a[0]=s=>C(null))},{default:P(()=>a[4]||(a[4]=[u(" 删除 ")])),_:1},8,["loading"])]),n(o(H),{pageSize:o(y),"onUpdate:pageSize":a[1]||(a[1]=s=>D(y)?y.value=s:null),currentPage:o(h),"onUpdate:currentPage":a[2]||(a[2]=s=>D(h)?h.value=s:null),columns:o(w).tableColumns,data:o(d),loading:o(l),pagination:{total:o(E)},onRegister:o(v)},null,8,["pageSize","currentPage","columns","data","loading","pagination","onRegister"])]),_:1}))}});export{Ve as default};
