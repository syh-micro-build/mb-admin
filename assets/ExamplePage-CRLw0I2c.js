var F=Object.defineProperty;var z=Object.getOwnPropertySymbols;var M=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable;var D=(i,r,t)=>r in i?F(i,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[r]=t,E=(i,r)=>{for(var t in r||(r={}))M.call(r,t)&&D(i,t,r[t]);if(z)for(var t of z(r))N.call(r,t)&&D(i,t,r[t]);return i};var b=(i,r,t)=>new Promise((f,p)=>{var v=l=>{try{m(t.next(l))}catch(d){p(d)}},g=l=>{try{m(t.throw(l))}catch(d){p(d)}},m=l=>l.done?f(l.value):Promise.resolve(l.value).then(v,g);m((t=t.apply(i,r)).next())});import{_ as Y}from"./ContentWrap.vue_vue_type_script_setup_true_lang-CAJscVvw.js";import{_ as H}from"./Search.vue_vue_type_script_setup_true_lang-Cw4W-5Vx.js";import"./index-CShChEM-.js";/* empty css               */import{_ as V}from"./Table.vue_vue_type_script_lang-BJvtTqWD.js";/* empty css                        *//* empty css                    *//* empty css                  */import{g as U,d as K}from"./index-CWQOUNiG.js";import{u as O}from"./useTable-B8JiDRl-.js";import{y as W,az as j,r as S,W as q,O as n,a4 as u,I as G,u as o,z as J,K as Q,L as P,D as X,l as R}from"./vue-chunks-DjkM_pWB.js";import{u as Z}from"./useEventBus-awKm6rFx.js";import{u as ee}from"./useCrudSchemas-Cog1rf3Y.js";import{_ as c}from"./Button.vue_vue_type_script_setup_true_lang-CzUbuLFF.js";import{C as te}from"./element-plus-ByljZuZM.js";import"./Icon-CYGZSI4f.js";/* empty css                */import"./Form-BeN-d8Cw.js";/* empty css                     *//* empty css               */import"./el-radio-button-CBHeQXLS.js";/* empty css                        *//* empty css                  *//* empty css                   *//* empty css                *//* empty css                    */import"./InputPassword-Ct7cxC8e.js";import"./style.css_vue_type_style_index_0_src_true_lang-kJ8-wxjb.js";import"./wang-editor-Osncebl8.js";import"./JsonEditor.vue_vue_type_script_setup_true_lang-DAQ6MuDU.js";import"./IconPicker-Bz6sqlJj.js";/* empty css                      */import"./useForm-zUnpEO4s.js";import"./useIcon-DWxSlYSa.js";/* empty css                        *//* empty css                         *//* empty css                  */import"./index-DB0iy_uu.js";import"./tree-V8lrdewf.js";const ae={class:"mb-10px"},Ue=W({name:"ExamplePage",__name:"ExamplePage",setup(i){const{push:r}=j(),t=S([]),f=S({}),p=e=>{f.value=e,_()},{tableRegister:v,tableState:g,tableMethods:m}=O({fetchDataApi:()=>b(this,null,function*(){const{currentPage:e,pageSize:a}=g,s=yield U(E({pageIndex:o(e),pageSize:o(a)},o(f)));return{list:s.data.list,total:s.data.total}}),fetchDelApi:()=>b(this,null,function*(){return!!(yield K(o(t)))})}),{loading:l,dataList:d,total:$,currentPage:h,pageSize:y}=g,{getList:_,getElTableExpose:A,delList:I}=m;_(),Z({name:"getList",callback:e=>{e==="add"&&(h.value=1),_()}});const w=e=>n(te,{type:e.importance===1?"success":e.importance===2?"warning":"danger"},{default:()=>[e.importance===1?"重要":e.importance===2?"良好":"	一般"]}),T=q([{field:"selection",search:{hidden:!0},form:{hidden:!0},detail:{hidden:!0},table:{type:"selection"}},{field:"index",label:"序号",type:"index",search:{hidden:!0},form:{hidden:!0},detail:{hidden:!0}},{field:"title",label:"标题",search:{component:"Input"},form:{component:"Input",colProps:{span:24}},detail:{span:24}},{field:"author",label:"作者",search:{hidden:!0}},{field:"display_time",label:"创建时间",search:{hidden:!0},form:{component:"DatePicker",componentProps:{type:"datetime",valueFormat:"YYYY-MM-DD HH:mm:ss"}}},{field:"importance",label:"重要性",search:{hidden:!0},form:{component:"Select",componentProps:{style:{width:"100%"},options:[{label:"重要",value:3},{label:"良好",value:2},{label:"一般",value:1}]}},detail:{slots:{default:e=>w(e)}},table:{slots:{default:e=>w(e.row)}}},{field:"pageviews",label:"阅读数",search:{hidden:!0},form:{component:"InputNumber",value:0}},{field:"content",label:"内容",search:{hidden:!0},table:{hidden:!0},form:{component:"Editor",colProps:{span:24}},detail:{span:24,slots:{default:e=>n("div",{innerHTML:e.content},null)}}},{field:"action",width:"260px",label:"操作",search:{hidden:!0},form:{hidden:!0},detail:{hidden:!0},table:{slots:{default:e=>n(G,null,[n(c,{type:"primary",onClick:()=>L(e.row,"edit")},{default:()=>[u("编辑")]}),n(c,{type:"success",onClick:()=>L(e.row,"detail")},{default:()=>[u("详情")]}),n(c,{type:"danger",onClick:()=>k(e.row)},{default:()=>[u("删除")]})])}}}]),{allSchemas:C}=ee(T),B=()=>{r("/example/example-add")},x=S(!1),k=e=>b(this,null,function*(){const a=yield A();t.value=e?[e.id]:(a==null?void 0:a.getSelectionRows().map(s=>s.id))||[],x.value=!0,yield I(o(t).length).finally(()=>{x.value=!1})}),L=(e,a)=>{r(`/example/example-${a}?id=${e.id}`)};return(e,a)=>(J(),Q(o(Y),null,{default:P(()=>[n(o(H),{schema:o(C).searchSchema,onSearch:p,onReset:p},null,8,["schema"]),X("div",ae,[n(o(c),{type:"primary",onClick:B},{default:P(()=>a[3]||(a[3]=[u("新增")])),_:1}),n(o(c),{loading:x.value,type:"danger",onClick:a[0]||(a[0]=s=>k(null))},{default:P(()=>a[4]||(a[4]=[u(" 删除 ")])),_:1},8,["loading"])]),n(o(V),{pageSize:o(y),"onUpdate:pageSize":a[1]||(a[1]=s=>R(y)?y.value=s:null),currentPage:o(h),"onUpdate:currentPage":a[2]||(a[2]=s=>R(h)?h.value=s:null),columns:o(C).tableColumns,data:o(d),loading:o(l),pagination:{total:o($)},onRegister:o(v)},null,8,["pageSize","currentPage","columns","data","loading","pagination","onRegister"])]),_:1}))}});export{Ue as default};
