var ie=Object.defineProperty;var w=Object.getOwnPropertySymbols;var Y=Object.prototype.hasOwnProperty,Z=Object.prototype.propertyIsEnumerable;var Q=(o,t,l)=>t in o?ie(o,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):o[t]=l,R=(o,t)=>{for(var l in t||(t={}))Y.call(t,l)&&Q(o,l,t[l]);if(w)for(var l of w(t))Z.call(t,l)&&Q(o,l,t[l]);return o};var F=(o,t)=>{var l={};for(var r in o)Y.call(o,r)&&t.indexOf(r)<0&&(l[r]=o[r]);if(o!=null&&w)for(var r of w(o))t.indexOf(r)<0&&Z.call(o,r)&&(l[r]=o[r]);return l};var N=(o,t,l)=>new Promise((r,s)=>{var b=u=>{try{E(l.next(u))}catch(c){s(c)}},f=u=>{try{E(l.throw(u))}catch(c){s(c)}},E=u=>u.done?r(u.value):Promise.resolve(u.value).then(b,f);E((l=l.apply(o,t)).next())});import{P as C,I as k,q as pe,r as y,d as m,o as be,u as i,w as Ee,a0 as Oe,a1 as Te,B as Se,Q as Ie}from"./vue-chunks-DOWhatC1.js";import{h as Re,j as ee,k as Ce,p as T,m as Pe}from"./index-DHjfWeid.js";/* empty css                     *//* empty css               *//* empty css                  *//* empty css               *//* empty css                    */import{g as ve}from"./el-radio-button-DAkZr4t4.js";/* empty css                        *//* empty css                  *//* empty css                   *//* empty css                *//* empty css                    */import{I as _e}from"./InputPassword-BDXcT1Ff.js";import{_ as Ae}from"./style.css_vue_type_style_index_0_src_true_lang-Dm-2_FVr.js";import{_ as ge}from"./JsonEditor.vue_vue_type_script_setup_true_lang-D9lDC4Kz.js";import{I as he}from"./IconPicker-CXkom4sM.js";import{R as oe,S as le,A as ke,T as De,J as ye,F as Ue,U as xe,Q as Me,V as Be,W as we,X as Fe,Y as Ge,Z as Le,_ as Ve,q as je,$ as Ke,a0 as We,a1 as He,N as Xe,a2 as L,s as V,v as $e,t as qe,w as Je,x as ze,y as Qe,z as Ye,G as Ze,n as Ne,k as me,D as eo}from"./element-plus-0HRIQ2yl.js";import{_ as oo}from"./Icon-CDGUbBOZ.js";const re={RadioGroup:oe,RadioButton:oe,CheckboxGroup:le,CheckboxButton:le,Input:ke,Autocomplete:De,InputNumber:ye,Select:Ue,Cascader:xe,Switch:Me,Slider:Be,TimePicker:we,DatePicker:Fe,Rate:Ge,ColorPicker:Le,Transfer:Ve,Divider:je,TimeSelect:Ke,SelectV2:We,InputPassword:_e,Editor:Ae,TreeSelect:He,Upload:Xe,JsonEditor:ge,IconPicker:he};var p=(o=>(o.RADIO_GROUP="RadioGroup",o.RADIO_BUTTON="RadioButton",o.CHECKBOX_GROUP="CheckboxGroup",o.CHECKBOX_BUTTON="CheckboxButton",o.INPUT="Input",o.AUTOCOMPLETE="Autocomplete",o.INPUT_NUMBER="InputNumber",o.SELECT="Select",o.CASCADER="Cascader",o.SWITCH="Switch",o.SLIDER="Slider",o.TIME_PICKER="TimePicker",o.DATE_PICKER="DatePicker",o.RATE="Rate",o.COLOR_PICKER="ColorPicker",o.TRANSFER="Transfer",o.DIVIDER="Divider",o.TIME_SELECT="TimeSelect",o.SELECT_V2="SelectV2",o.INPUT_PASSWORD="InputPassword",o.EDITOR="Editor",o.TREE_SELECT="TreeSelect",o.UPLOAD="Upload",o.JSON_EDITOR="JsonEditor",o.ICON_PICKER="IconPicker",o))(p||{});const te=o=>{var r,s;const t=[p.INPUT,p.AUTOCOMPLETE,p.INPUT_NUMBER,p.INPUT_PASSWORD],l=[p.SELECT,p.TIME_PICKER,p.DATE_PICKER,p.TIME_SELECT,p.SELECT_V2];return t.includes(o==null?void 0:o.component)?{placeholder:"请输入"}:l.includes(o==null?void 0:o.component)?["datetimerange","daterange","monthrange","datetimerange","daterange"].includes(((r=o==null?void 0:o.componentProps)==null?void 0:r.type)||((s=o==null?void 0:o.componentProps)==null?void 0:s.isRange))?{startPlaceholder:"开始时间",endPlaceholder:"结束时间",rangeSeparator:"-"}:{placeholder:"请选择"}:{}},lo=(o={})=>R(R({},o.span?{}:{xs:24,sm:12,md:12,lg:12,xl:12}),o),se=o=>{var s;const t=((s=o==null?void 0:o.componentProps)==null?void 0:s.on)||{},l={};for(const b in t)t[b]&&(l[`on${Ce(b)}`]=(...f)=>{t[b](...f)});const r=R(R({clearable:!0},o.componentProps),l);return r.slots&&delete r.slots,r.on&&delete r.on,r},ro=(o={})=>{const t={};for(const l in o)o[l]&&(Re(o[l])?t[ee(l)]=(...r)=>{var s;return(s=o[l])==null?void 0:s.call(o,...r)}:t[ee(l)]=()=>o[l]);return t},to=(o,t)=>{const l=R({},t);return o.map(r=>{if(r.remove)delete l[r.field];else if(r.component!=="Divider"){const s=L(l,r.field);V(l,r.field,s!==void 0?L(l,r.field):r.value!==void 0?r.value:void 0)}}),Object.keys(l).forEach(r=>{o.some(b=>b.field===r)||delete l[r]}),l},so=()=>{const o=l=>{var E,u,c,S;const r=l==null?void 0:l.componentProps,s=(E=r==null?void 0:r.slots)==null?void 0:E.optionGroupDefault,b=(u=r==null?void 0:r.props)==null?void 0:u.label,f=(c=r==null?void 0:r.props)==null?void 0:c.key;return(S=r==null?void 0:r.options)==null?void 0:S.map(d=>{var P;return(P=d==null?void 0:d.options)!=null&&P.length?s?s(d):C($e,{label:d[b||"label"],key:d[f||"key"]},{default:()=>{var U;return(U=d==null?void 0:d.options)==null?void 0:U.map(x=>t(l,x))}}):t(l,d)})},t=(l,r)=>{var c,S,d,P;const s=l.componentProps,b=(c=s==null?void 0:s.props)==null?void 0:c.label,f=(S=s==null?void 0:s.props)==null?void 0:S.value,E=(d=s==null?void 0:s.props)==null?void 0:d.key,u=(P=s.slots)==null?void 0:P.optionDefault;return C(qe,k(r,{key:r[E||"key"],label:r[b||"label"],value:r[f||"value"]}),{default:()=>u?u(r):void 0})};return{renderSelectOptions:o}},ao=()=>({renderRadioOptions:t=>{var E,u,c,S;const l=t==null?void 0:t.componentProps,r=((E=l==null?void 0:l.props)==null?void 0:E.value)||"value",s=((u=l==null?void 0:l.props)==null?void 0:u.label)||"label",b=((c=l==null?void 0:l.props)==null?void 0:c.disabled)||"disabled",f=t.component===p.RADIO_GROUP?Je:ze;return(S=l==null?void 0:l.options)==null?void 0:S.map(d=>{const P=F(d,[]);return C(f,k(P,{disabled:d[b||"disabled"],label:d[s||"label"],value:d[r||"value"]}),{default:()=>[d[s||"label"]]})})}}),no=()=>({renderCheckboxOptions:t=>{var E,u,c,S;const l=t==null?void 0:t.componentProps,r=((E=l==null?void 0:l.props)==null?void 0:E.value)||"value",s=((u=l==null?void 0:l.props)==null?void 0:u.label)||"label",b=((c=l==null?void 0:l.props)==null?void 0:c.disabled)||"disabled",f=t.component===p.CHECKBOX_GROUP?Qe:Ye;return(S=l==null?void 0:l.options)==null?void 0:S.map(d=>{const P=F(d,[]);return C(f,k(P,{disabled:d[b||"disabled"],label:d[s||"label"],value:d[r||"value"]}),{default:()=>[d[s||"label"]]})})}});function G(o){return typeof o=="function"||Object.prototype.toString.call(o)==="[object Object]"&&!Se(o)}const{renderSelectOptions:co}=so(),{renderRadioOptions:fo}=ao(),{renderCheckboxOptions:uo}=no(),io=pe({name:"Form",props:{schema:{type:Array,default:()=>[]},isCol:T.bool.def(!0),model:{type:Object,default:()=>({})},autoSetPlaceholder:T.bool.def(!0),isCustom:T.bool.def(!1),labelWidth:T.oneOfType([String,Number]).def("auto"),rules:{type:Object,default:()=>({})},labelPosition:T.oneOf(["left","right","top"]).def("right"),labelSuffix:T.string.def(""),hideRequiredAsterisk:T.bool.def(!1),requireAsteriskPosition:T.oneOf(["left","right"]).def("left"),showMessage:T.bool.def(!0),inlineMessage:T.bool.def(!1),statusIcon:T.bool.def(!1),validateOnRuleChange:T.bool.def(!0),size:{type:String,default:void 0},disabled:T.bool.def(!1),scrollToError:T.bool.def(!1),scrollToErrorOffset:T.oneOfType([Boolean,Object]).def(void 0)},emits:["register"],setup(o,{slots:t,expose:l,emit:r}){const s=y(),b=y({}),f=m(()=>{const e=R({},o);return Object.assign(e,i(b)),e}),E=y({}),u=y({}),c=y(o.model);be(()=>{var e;r("register",(e=i(s))==null?void 0:e.$parent,i(s))});const S=(e={})=>{c.value=Object.assign(i(c),e)},d=(e={})=>{b.value=Object.assign(i(b),e)},P=e=>{const{schema:a}=i(f),n=Pe(a,I=>I.field===e);n>-1&&a.splice(n,1)},U=(e,a)=>{const{schema:n}=i(f);if(a!==void 0){n.splice(a,0,e);return}n.push(e)},x=e=>{const{schema:a}=i(f);for(const n of a)for(const I of e)n.field===I.field&&V(n,I.path,I.value)},ae=(e,a)=>N(this,null,function*(){const n=yield e();x([{field:a.field,path:a.component===p.TREE_SELECT||a.component===p.TRANSFER?"componentProps.data":"componentProps.options",value:n}])}),ne=e=>i(E)[e],de=e=>i(u)[e],j=(e,a)=>{E.value[a]=e},ce=(e,a)=>{u.value[a]=e};l({setValues:S,formModel:c,setProps:d,delSchema:P,addSchema:U,setSchema:x,getComponentExpose:ne,getFormItemExpose:de}),Ee(()=>i(f).schema,(e=[])=>{c.value=to(e,i(c))},{immediate:!0,deep:!0});const fe=()=>{let e;const{isCol:a}=i(f);return a?C(Ne,{gutter:20},G(e=K())?e:{default:()=>[e]}):K()},K=()=>{const{schema:e=[],isCol:a}=i(f);return e.filter(n=>!n.remove&&!n.hidden).map(n=>{let I;const M=n.component==="Divider",B=re.Divider;return M?C(B,R({contentPosition:"left"},n.componentProps),{default:()=>[n==null?void 0:n.label]}):a?C(me,lo(n.colProps),G(I=W(n))?I:{default:()=>[I]}):W(n)})},W=e=>{var n,I,M,B;e.optionApi&&ae(e.optionApi,e);const a={default:()=>{var A,g,h,H,X;if((g=(A=e==null?void 0:e.formItemProps)==null?void 0:A.slots)!=null&&g.default)return(H=(h=e==null?void 0:e.formItemProps)==null?void 0:h.slots)==null?void 0:H.default(c.value);{const $=re[e.component],{autoSetPlaceholder:q}=i(f),v=((X=e==null?void 0:e.componentProps)==null?void 0:X.slots)||{},D=R({},ro(v));return e.component===p.SELECT&&(D.default=v.default?()=>{var O;return v.default(i((O=e==null?void 0:e.componentProps)==null?void 0:O.options))}:()=>co(e)),e.component===p.SELECT_V2&&v.default&&(D.default=({item:O})=>v.default(O)),(e.component===p.RADIO_GROUP||e.component===p.RADIO_BUTTON)&&(D.default=v.default?()=>{var O;return v.default(i((O=e==null?void 0:e.componentProps)==null?void 0:O.options))}:()=>fo(e)),(e.component===p.CHECKBOX_GROUP||e.component===p.CHECKBOX_BUTTON)&&(D.default=v.default?()=>{var O;return v.default(i((O=e==null?void 0:e.componentProps)==null?void 0:O.options))}:()=>uo(e)),C(Ie,null,[(()=>{var J,z;const O=m({get:()=>L(c.value,e.field),set:_=>{V(c.value,e.field,_)}});return e.component===p.UPLOAD?C($,k({"file-list":O.value,"onUpdate:file-list":_=>O.value=_,ref:_=>j(_,e.field)},q&&te(e),se(e),{style:((J=e.componentProps)==null?void 0:J.style)||{width:"100%"}}),R({},D)):C($,k({modelValue:O.value,"onUpdate:modelValue":_=>O.value=_,ref:_=>j(_,e.field)},q&&te(e),se(e),{style:((z=e.componentProps)==null?void 0:z.style)||{width:"100%"}}),R({},D))})()])}}};return(I=(n=e==null?void 0:e.formItemProps)==null?void 0:n.slots)!=null&&I.label&&(a.label=(...A)=>{var g,h;return(h=(g=e==null?void 0:e.formItemProps)==null?void 0:g.slots)==null?void 0:h.label(...A)}),(B=(M=e==null?void 0:e.formItemProps)==null?void 0:M.slots)!=null&&B.error&&(a.error=(...A)=>{var g,h;return(h=(g=e==null?void 0:e.formItemProps)==null?void 0:g.slots)==null?void 0:h.error(...A)}),Oe(C(eo,k({ref:A=>ce(A,e.field)},e.formItemProps||{},{prop:e.field,label:e.label||""}),G(a)?a:{default:()=>[a]}),[[Te,!e.hidden]])},ue=()=>{const e=["schema","isCol","autoSetPlaceholder","isCustom","model"],a=R({},i(f));for(const n in a)e.indexOf(n)!==-1&&delete a[n];return a};return()=>C(Ze,k({ref:s},ue(),{model:i(f).isCustom?i(f).model:c,class:"form",onSubmit:e=>{e.preventDefault()}}),{default:()=>{const{isCustom:e}=i(f);return e?ve(t,"default"):fe()}})}}),Bo=oo(io,[["__scopeId","data-v-f2907226"]]);export{Bo as F,to as i};
