var R=(V,g,i)=>new Promise((y,d)=>{var b=l=>{try{c(i.next(l))}catch(p){d(p)}},k=l=>{try{c(i.throw(l))}catch(p){d(p)}},c=l=>l.done?y(l.value):Promise.resolve(l.value).then(b,k);c((i=i.apply(V,g)).next())});import{g as E}from"./index-C_g_R67e.js";import{u as F}from"./useTable-2juYdfOC.js";import{_ as P}from"./Table.vue_vue_type_script_lang-D2yjK3SK.js";import"./index-DLMkugkx.js";/* empty css                        *//* empty css                    *//* empty css                  *//* empty css               */import{_ as q}from"./Search.vue_vue_type_script_setup_true_lang-C4Ihs01O.js";import{_ as I}from"./ContentWrap.vue_vue_type_script_setup_true_lang-B_rQ0Ssc.js";import{_ as J}from"./Write.vue_vue_type_script_setup_true_lang-a5t_jfBs.js";import{_ as M}from"./Detail.vue_vue_type_script_setup_true_lang-Bxoi2DY3.js";import{_ as O}from"./Dialog.vue_vue_type_style_index_0_lang--bPQlZKq.js";import{_ as n}from"./Button.vue_vue_type_script_setup_true_lang-BMTIIzQW.js";import{C as U}from"./element-plus-BqdG1kF4.js";import{q as X,J as S,O as e,P as h,V as m,r,t as v,v as j,R as u,u as a,x as z,S as x,X as G}from"./vue-chunks-C8vH-0tq.js";/* empty css                      *//* empty css                  *//* empty css                        *//* empty css                */import"./el-radio-button-DXU-by-2.js";/* empty css                         */import"./Icon-LrwZ7kOU.js";/* empty css                  */import"./index-CspdUlCn.js";import"./Form-LvEMfz5s.js";/* empty css                     *//* empty css               *//* empty css                        *//* empty css                   *//* empty css                *//* empty css                    */import"./InputPassword-D_u5Q9pi.js";import"./style.css_vue_type_style_index_0_src_true_lang-DJ4Ri80S.js";import"./wang-editor-CP7FdckG.js";import"./JsonEditor.vue_vue_type_script_setup_true_lang-BVAsQT1z.js";import"./IconPicker-FoHMRdJt.js";import"./useForm-bLaJxgRi.js";import"./useIcon-DtJh9m5U.js";import"./useValidator-Nt61Jv1p.js";import"./index-BjF-d-pJ.js";import"./tree-Dgaev6Pi.js";import"./Descriptions-CzJeaLh7.js";const H={class:"mb-10px"},It=X({__name:"Role",setup(V){const{tableRegister:g,tableState:i,tableMethods:y}=F({fetchDataApi:()=>R(this,null,function*(){const t=yield E();return{list:t.data.list||[],total:t.data.total}})}),{dataList:d,loading:b,total:k}=i,{getList:c}=y,l=S([{field:"index",label:"序号",type:"index"},{field:"roleName",label:"角色名称"},{field:"status",label:"状态",slots:{default:t=>e(h,null,[e(U,{type:t.row.status===0?"danger":"success"},{default:()=>[t.row.status===1?"启用":"禁用"]})])}},{field:"createTime",label:"创建时间"},{field:"remark",label:"备注"},{field:"action",label:"操作",width:240,slots:{default:t=>{const o=t.row;return e(h,null,[e(n,{type:"primary",onClick:()=>N(o,"edit")},{default:()=>[m("编辑")]}),e(n,{type:"success",onClick:()=>N(o,"detail")},{default:()=>[m("详情")]}),e(n,{type:"danger"},{default:()=>[m("删除")]})])}}}]),p=S([{field:"roleName",label:"角色名称",component:"Input"}]),A=r({}),$=t=>{A.value=t,c()},s=r(!1),w=r(""),f=r(),_=r(""),T=r(),C=r(!1),N=(t,o)=>{w.value=o==="edit"?"编辑":"详情",_.value=o,f.value=t,s.value=!0},L=()=>{w.value="新增",f.value=void 0,s.value=!0,_.value=""},D=()=>R(this,null,function*(){const t=a(T);(yield t==null?void 0:t.submit())&&(C.value=!0,setTimeout(()=>{C.value=!1,s.value=!1},1e3))});return(t,o)=>(v(),j(h,null,[e(a(I),null,{default:u(()=>[e(a(q),{schema:p,onReset:$,onSearch:$},null,8,["schema"]),z("div",H,[e(a(n),{type:"primary",onClick:L},{default:u(()=>[m("新增")]),_:1})]),e(a(P),{columns:l,"default-expand-all":"","node-key":"id",data:a(d),loading:a(b),pagination:{total:a(k)},onRegister:a(g)},null,8,["columns","data","loading","pagination","onRegister"])]),_:1}),e(a(O),{modelValue:s.value,"onUpdate:modelValue":o[1]||(o[1]=B=>s.value=B),title:w.value},{footer:u(()=>[_.value!=="detail"?(v(),x(a(n),{key:0,type:"primary",loading:C.value,onClick:D},{default:u(()=>[m(" 保存 ")]),_:1},8,["loading"])):G("",!0),e(a(n),{onClick:o[0]||(o[0]=B=>s.value=!1)},{default:u(()=>[m("关闭")]),_:1})]),default:u(()=>[_.value!=="detail"?(v(),x(J,{key:0,ref_key:"writeRef",ref:T,"current-row":f.value},null,8,["current-row"])):(v(),x(M,{key:1,"current-row":f.value},null,8,["current-row"]))]),_:1},8,["modelValue","title"])],64))}});export{It as default};
