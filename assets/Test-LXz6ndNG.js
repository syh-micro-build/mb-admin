import{p as P,v as V}from"./index-lp8iKSv1.js";import{q as k,aA as D,d as g,u as e,G as R,X as m,r as $,ao as x,t as o,S as d,R as t,O as r,V as a,$ as f}from"./vue-chunks-CrLAACUV.js";import{_ as A}from"./ContentWrap.vue_vue_type_script_setup_true_lang-oNG3LnYW.js";/* empty css                   *//* empty css               */import{_ as i}from"./Button.vue_vue_type_script_setup_true_lang-DKc4O2hz.js";import{q as c,n as y,k as n}from"./element-plus-Dmwbteg1.js";import"./Icon-Bfhd4Js4.js";/* empty css                *//* empty css                  */const C=k({__name:"Permission",props:{permission:P.string.def()},setup(p){const{currentRoute:u}=D(),h=p,w=g(()=>{var s,_;return((_=(s=e(u))==null?void 0:s.meta)==null?void 0:_.permission)||[]}),l=g(()=>{const s=e(h.permission);return s?e(w).includes(s):!0});return(s,_)=>l.value?R(s.$slots,"default",{key:0}):m("",!0)}}),v=p=>{const u=V.currentRoute.value.meta.permission||[];if(!p)throw new Error("请设置操作权限值");return!!u.includes(p)},j=k({__name:"Test",setup(p){const u=$("add");return setTimeout(()=>{u.value="view"},3e3),(h,w)=>{const l=C,s=x("hasPermi");return o(),d(e(A),null,{default:t(()=>[r(e(c),null,{default:t(()=>[a("组件方式判断（已经全局注册，支持动态修改）")]),_:1}),r(e(y),{gutter:20},{default:t(()=>[r(e(n),{span:8},{default:t(()=>[a(" 新增权限： "),r(l,{permission:"add"},{default:t(()=>[r(e(i),{type:"primary"},{default:t(()=>[a(" Add ")]),_:1})]),_:1})]),_:1}),r(e(n),{span:8},{default:t(()=>[a(" 删除权限： "),r(l,{permission:"delete"},{default:t(()=>[r(e(i),{type:"danger"},{default:t(()=>[a(" Delete ")]),_:1})]),_:1})]),_:1}),r(e(n),{span:8},{default:t(()=>[a(" 3秒后切换查看权限： "),r(l,{permission:u.value},{default:t(()=>[r(e(i),{type:"primary"},{default:t(()=>[a(" View ")]),_:1})]),_:1},8,["permission"])]),_:1})]),_:1}),r(e(c),null,{default:t(()=>[a("指令方式判断（已经全局注册，不支持动态修改）")]),_:1}),r(e(y),{gutter:20},{default:t(()=>[r(e(n),{span:8},{default:t(()=>[a(" 新增权限： "),f((o(),d(e(i),{type:"primary"},{default:t(()=>[a(" Add ")]),_:1})),[[s,"add"]])]),_:1}),r(e(n),{span:8},{default:t(()=>[a(" 删除权限： "),f((o(),d(e(i),{type:"danger"},{default:t(()=>[a(" Delete ")]),_:1})),[[s,"delete"]])]),_:1}),r(e(n),{span:8},{default:t(()=>[a(" 3秒后切换查看权限（无法动态修改）： "),f((o(),d(e(i),{type:"primary"},{default:t(()=>[a(" View ")]),_:1})),[[s,u.value]])]),_:1})]),_:1}),r(e(c),null,{default:t(()=>[a("函数方式判断")]),_:1}),r(e(y),{gutter:20},{default:t(()=>[r(e(n),{span:8},{default:t(()=>[a(" 新增权限： "),e(v)("add")?(o(),d(e(i),{key:0,type:"primary"},{default:t(()=>[a(" Add ")]),_:1})):m("",!0)]),_:1}),r(e(n),{span:8},{default:t(()=>[a(" 删除权限： "),e(v)("delete")?(o(),d(e(i),{key:0,type:"danger"},{default:t(()=>[a(" Delete ")]),_:1})):m("",!0)]),_:1}),r(e(n),{span:8},{default:t(()=>[a(" 3秒后切换查看权限： "),e(v)(e(u.value))?(o(),d(e(i),{key:0,type:"primary"},{default:t(()=>[a(" View ")]),_:1})):m("",!0)]),_:1})]),_:1})]),_:1})}}});export{j as default};
