var i=(l,m,e)=>new Promise((p,n)=>{var c=o=>{try{a(e.next(o))}catch(r){n(r)}},s=o=>{try{a(e.throw(o))}catch(r){n(r)}},a=o=>o.done?p(o.value):Promise.resolve(o.value).then(c,s);a((e=e.apply(l,m)).next())});import{F as g}from"./Form-CCD3RDPb.js";import{u as _}from"./useForm-CHEOwuYW.js";import{u as I}from"./useValidator-Nt61Jv1p.js";import{q as w,K as u,w as D,t as y,T as F,u as f}from"./vue-chunks-BFNeukf4.js";const M=w({__name:"Write",props:{currentRow:{type:Object,default:()=>null}},setup(l,{expose:m}){const{required:e}=I(),p=l,{formRegister:n,formMethods:c}=_(),{setValues:s,getFormData:a,getElFormExpose:o,setSchema:r}=c,d=u([{field:"title",label:"标题",component:"Input",formItemProps:{rules:[e()]},colProps:{span:24}},{field:"author",label:"作者",component:"Input",formItemProps:{rules:[e()]}},{field:"display_time",label:"创建时间",component:"DatePicker",componentProps:{type:"datetime",valueFormat:"YYYY-MM-DD HH:mm:ss"},formItemProps:{rules:[e()]}},{field:"importance",label:"重要性",component:"Select",formItemProps:{rules:[e()]},componentProps:{options:[{label:"重要",value:3},{label:"良好",value:2},{label:"一般",value:1}]}},{field:"pageviews",label:"阅读数",component:"InputNumber",value:0,formItemProps:{rules:[e()]}},{field:"content",component:"Editor",colProps:{span:24},componentProps:{defaultHtml:"",onChange:t=>{s({content:t.getHtml()})}},label:"内容"}]),b=u({title:[e()],author:[e()],importance:[e()],pageviews:[e()],display_time:[e()],content:[e()]}),v=()=>i(this,null,function*(){const t=yield o();if(yield t==null?void 0:t.validate().catch(h=>{}))return yield a()});return D(()=>p.currentRow,t=>{t&&(s(t),r([{field:"content",path:"componentProps.defaultHtml",value:t.content}]))},{deep:!0,immediate:!0}),m({submit:v}),(t,P)=>(y(),F(f(g),{rules:b,onRegister:f(n),schema:d},null,8,["rules","onRegister","schema"]))}});export{M as _};
