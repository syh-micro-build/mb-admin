import{_ as S,I as g}from"./Icon-zoEhMSPp.js";import{y as I,r as u,z as C,A as w,O as m,L as T,B as x,Q as O,C as V,u as d,T as z,U as H,D as s,R as K,K as U,a4 as M}from"./vue-chunks-DjkM_pWB.js";import"./index-K_0bZCaB.js";/* empty css                *//* empty css                    */import{ak as j,j as _,E as k}from"./element-plus-ByljZuZM.js";import{_ as A}from"./ContentWrap.vue_vue_type_script_setup_true_lang-BgUpHmCQ.js";/* empty css                *//* empty css                  */const Q={key:1},W="300px",q="400px",F=I({__name:"Tree",props:{data:{},treeProps:{},width:{},height:{}},emits:["node-click","node-expand","node-collapse"],setup(y,{emit:p}){var N,B;const h=y,a=p,l=u(null),c=u(!1),e=u(null),n=u({}),t=()=>{c.value=!1,document.removeEventListener("click",t),document.removeEventListener("contextmenu",t)},i=(o,f,v,ee)=>{if(e.value=f,!l.value)return;const E=l.value.getBoundingClientRect(),$=o.target.getBoundingClientRect(),b=$.top-E.top+l.value.scrollTop,D=$.left-E.left+l.value.scrollLeft;n.value={position:"absolute",top:`${b+20}px`,left:`${D+20}px`},c.value=!0,document.addEventListener("click",t),document.addEventListener("contextmenu",t)},r=o=>{a("node-click",o),t()},L=o=>{a("node-expand",o),t()},P=o=>{a("node-collapse",o),t()},R={position:"relative",overflow:"auto",width:(N=h.width)!=null?N:W,height:(B=h.height)!=null?B:q};return(o,f)=>(C(),w("div",{class:"tree-container",ref_key:"treeContainer",ref:l,style:R},[m(d(j),V(o.treeProps,{data:o.data,onNodeClick:r,onNodeExpand:L,onNodeCollapse:P,onNodeContextmenu:i}),{default:T(({node:v})=>[o.$slots["render-node"]?x(o.$slots,"render-node",{key:0,node:v},void 0,!0):(C(),w("span",Q,O(v.label),1))]),_:3},16,["data"]),z(s("div",{class:"treeMenu",style:K(n.value)},[x(o.$slots,"context-menu",{node:e.value,data:e.value},()=>[f[0]||(f[0]=s("div",{style:{padding:"8px"}},"No menu defined",-1))],!0)],4),[[H,c.value]]),x(o.$slots,"default",{},void 0,!0)],512))}}),G=S(F,[["__scopeId","data-v-3f2884a9"]]),J=["onClick"],X=["onClick"],Y=["onClick"],Z=I({__name:"Tree",setup(y){const p=u([{id:1,name:"北京",children:[{id:5,name:"朝阳",children:[{id:17,name:"双塔",children:[]},{id:18,name:"龙城",children:[]}]},{id:6,name:"丰台",children:[{id:19,name:"新村",children:[]},{id:20,name:"大红门",children:[]},{id:21,name:"长辛店",children:[{id:22,name:"东山坡",children:[]},{id:23,name:"北关",children:[]},{id:24,name:"光明里",children:[]},{id:25,name:"赵辛店",children:[]},{id:26,name:"西峰寺",children:[]}]}]},{id:7,name:"海淀",children:[]},{id:8,name:"房山",children:[]},{id:10,name:"顺义",children:[]}]},{id:2,name:"上海",children:[{id:11,name:"黄埔",children:[]},{id:12,name:"徐汇",children:[]}]},{id:3,name:"广州",children:[{id:13,name:"荔湾",children:[]},{id:14,name:"白云",children:[]},{id:15,name:"越秀",children:[]},{id:16,name:"南沙",children:[]}]}]),h=e=>{},a=e=>{_.prompt("请输入分组名称","添加子分组",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/\S/,inputErrorMessage:"分组名称不能为空"}).then(({value:n})=>{e.children.push({id:e.children.length+1,name:n,children:[]}),k.success("添加成功")})},l=e=>{_.prompt("请输入新的分组名称","修改分组名称",{confirmButtonText:"确定",cancelButtonText:"取消",inputValue:e.name,inputPattern:/\S/,inputErrorMessage:"分组名称不能为空"}).then(({value:n})=>{e.name=n,k.success("修改成功")})},c=e=>{_.confirm(`删除 [${e.name}] 分组、下级子分组 <br>是否继续?`,"提示",{dangerouslyUseHTMLString:!0,confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(()=>{const n=e.id,t=i=>{for(let r=0;r<i.length;r++){if(i[r].id===n){i.splice(r,1);return}i[r].children&&t(i[r].children)}};t(p.value),k.success("删除成功")})};return(e,n)=>(C(),U(d(A),{title:"树形控件（节点右键可自定义菜单选项）",message:"基于 ElementPlus 的 Tree 组件二次封装"},{default:T(()=>[m(d(G),{data:p.value,"tree-props":{highlightCurrent:!0,nodeKey:"id",props:{children:"children",label:"name"}},width:"300px",height:"400px",onNodeClick:h},{"context-menu":T(({node:t})=>[s("div",{class:"menuItem",onClick:i=>a(t)},[m(d(g),{icon:"ep:plus",style:{color:"#1e9fff"}}),n[0]||(n[0]=s("span",null,"添加子分组",-1))],8,J),s("div",{class:"menuItem",onClick:i=>l(t)},[m(d(g),{icon:"ep:edit-pen",style:{color:"#1e9fff"}}),n[1]||(n[1]=M(" 修改分组名称 "))],8,X),s("div",{class:"menuItem",onClick:i=>c(t)},[m(d(g),{icon:"ep:delete",style:{color:"#1e9fff"}}),n[2]||(n[2]=M(" 删除分组及子分组 "))],8,Y)]),_:1},8,["data"])]),_:1}))}}),ce=S(Z,[["__scopeId","data-v-a38901da"]]);export{ce as default};
