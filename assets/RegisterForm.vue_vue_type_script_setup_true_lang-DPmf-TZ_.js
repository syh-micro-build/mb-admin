var g=(n,p,c)=>new Promise((u,d)=>{var m=s=>{try{r(c.next(s))}catch(t){d(t)}},e=s=>{try{r(c.throw(s))}catch(t){d(t)}},r=s=>s.done?u(s.value):Promise.resolve(s.value).then(m,e);r((c=c.apply(n,p)).next())});import{F as I}from"./Form-CZOzD3IG.js";import{u as x}from"./useI18n-cFeKIlG0.js";import{u as C}from"./useForm-Dg0OwJE9.js";import"./index-DGmNIDfv.js";import{u as F}from"./useValidator-Nt61Jv1p.js";import{_ as h}from"./Button.vue_vue_type_script_setup_true_lang-DVqcdC7i.js";import{G as V}from"./element-plus-BuBGixiZ.js";import{y as R,r as v,W as j,O as l,u as i,I as E,z as O,K as q,a8 as z}from"./vue-chunks-CaTGQ7j2.js";function P(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Object]"&&!z(n)}const T=R({__name:"RegisterForm",emits:["to-login"],setup(n,{emit:p}){const c=p,{formRegister:u,formMethods:d}=C(),{getElFormExpose:m}=d,{t:e}=x(),{required:r}=F(),s=v(60),t=v(!1),_=()=>{t.value=!0;const o=setInterval(()=>{s.value--,s.value<=0&&(clearInterval(o),s.value=60,t.value=!1)},1e3)},b=j([{field:"title",colProps:{span:24},formItemProps:{slots:{default:()=>l("h2",{class:"text-2xl font-bold text-center w-[100%]"},[e("login.register")])}}},{field:"username",label:e("login.username"),value:"",component:"Input",colProps:{span:24},componentProps:{placeholder:e("login.usernamePlaceholder")}},{field:"password",label:e("login.password"),value:"",component:"InputPassword",colProps:{span:24},componentProps:{style:{width:"100%"},strength:!0,placeholder:e("login.passwordPlaceholder")}},{field:"check_password",label:e("login.checkPassword"),value:"",component:"InputPassword",colProps:{span:24},componentProps:{style:{width:"100%"},strength:!0,placeholder:e("login.passwordPlaceholder")}},{field:"code",label:e("login.code"),colProps:{span:24},formItemProps:{slots:{default:o=>l("div",{class:"w-[100%] flex"},[l(V,{modelValue:o.code,"onUpdate:modelValue":a=>o.code=a,placeholder:e("login.codePlaceholder")},null),l(h,{type:"primary",disabled:i(t),class:"ml-10px",onClick:_},{default:()=>[e("login.getCode"),i(t)?`(${i(s)})`:""]})])}}},{field:"register",colProps:{span:24},formItemProps:{slots:{default:()=>{let o,a;return l(E,null,[l("div",{class:"w-[100%]"},[l(h,{type:"primary",class:"w-[100%]",loading:f.value,onClick:k},P(o=e("login.register"))?o:{default:()=>[o]})]),l("div",{class:"w-[100%] mt-15px"},[l(h,{class:"w-[100%]",onClick:w},P(a=e("login.hasUser"))?a:{default:()=>[a]})])])}}}}]),y={username:[r()],password:[r()],check_password:[r()],code:[r()]},w=()=>{c("to-login")},f=v(!1),k=()=>g(this,null,function*(){const o=yield m();o==null||o.validate(a=>g(this,null,function*(){if(a)try{f.value=!0,w()}finally{f.value=!1}}))});return(o,a)=>(O(),q(i(I),{schema:b,rules:y,"label-position":"top","hide-required-asterisk":"",size:"large",class:"dark:border-1 dark:border-[var(--el-border-color)] dark:border-solid",onRegister:i(u)},null,8,["schema","onRegister"]))}});export{T as _};
