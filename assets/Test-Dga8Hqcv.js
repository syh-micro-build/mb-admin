import{p as V,v as T}from"./index-CKBT0Z4D.js";import{y as D,aA as x,c as P,u as t,B as A,H as f,r as C,ap as E,z as d,K as l,L as r,O as s,a4 as i,T as v}from"./vue-chunks-ChjHxF1G.js";import{_ as R}from"./ContentWrap.vue_vue_type_script_setup_true_lang-CG3tigcE.js";/* empty css                   *//* empty css               */import{_ as u}from"./Button.vue_vue_type_script_setup_true_lang-RDuc5Oiy.js";import{q as w,n as _,k as o}from"./element-plus-CUBv5pjL.js";import"./Icon-CNrnMeKG.js";/* empty css                *//* empty css                  */const $=D({__name:"Permission",props:{permission:V.string.def()},setup(a){const{currentRoute:p}=x(),k=a,e=P(()=>{var n,y;return((y=(n=t(p))==null?void 0:n.meta)==null?void 0:y.permission)||[]}),m=P(()=>{const n=t(k.permission);return n?t(e).includes(n):!0});return(n,y)=>m.value?A(n.$slots,"default",{key:0}):f("",!0)}}),g=a=>{const p=T.currentRoute.value.meta.permission||[];if(!a)throw new Error("请设置操作权限值");return!!p.includes(a)},j=D({__name:"Test",setup(a){const p=C("add");return setTimeout(()=>{p.value="view"},3e3),(k,e)=>{const m=$,n=E("hasPermi");return d(),l(t(R),null,{default:r(()=>[s(t(w),null,{default:r(()=>e[0]||(e[0]=[i("组件方式判断（已经全局注册，支持动态修改）")])),_:1}),s(t(_),{gutter:20},{default:r(()=>[s(t(o),{span:8},{default:r(()=>[e[2]||(e[2]=i(" 新增权限： ")),s(m,{permission:"add"},{default:r(()=>[s(t(u),{type:"primary"},{default:r(()=>e[1]||(e[1]=[i(" Add ")])),_:1})]),_:1})]),_:1}),s(t(o),{span:8},{default:r(()=>[e[4]||(e[4]=i(" 删除权限： ")),s(m,{permission:"delete"},{default:r(()=>[s(t(u),{type:"danger"},{default:r(()=>e[3]||(e[3]=[i(" Delete ")])),_:1})]),_:1})]),_:1}),s(t(o),{span:8},{default:r(()=>[e[6]||(e[6]=i(" 3秒后切换查看权限： ")),s(m,{permission:p.value},{default:r(()=>[s(t(u),{type:"primary"},{default:r(()=>e[5]||(e[5]=[i(" View ")])),_:1})]),_:1},8,["permission"])]),_:1})]),_:1}),s(t(w),null,{default:r(()=>e[7]||(e[7]=[i("指令方式判断（已经全局注册，不支持动态修改）")])),_:1}),s(t(_),{gutter:20},{default:r(()=>[s(t(o),{span:8},{default:r(()=>[e[9]||(e[9]=i(" 新增权限： ")),v((d(),l(t(u),{type:"primary"},{default:r(()=>e[8]||(e[8]=[i(" Add ")])),_:1})),[[n,"add"]])]),_:1}),s(t(o),{span:8},{default:r(()=>[e[11]||(e[11]=i(" 删除权限： ")),v((d(),l(t(u),{type:"danger"},{default:r(()=>e[10]||(e[10]=[i(" Delete ")])),_:1})),[[n,"delete"]])]),_:1}),s(t(o),{span:8},{default:r(()=>[e[13]||(e[13]=i(" 3秒后切换查看权限（无法动态修改）： ")),v((d(),l(t(u),{type:"primary"},{default:r(()=>e[12]||(e[12]=[i(" View ")])),_:1})),[[n,p.value]])]),_:1})]),_:1}),s(t(w),null,{default:r(()=>e[14]||(e[14]=[i("函数方式判断")])),_:1}),s(t(_),{gutter:20},{default:r(()=>[s(t(o),{span:8},{default:r(()=>[e[16]||(e[16]=i(" 新增权限： ")),t(g)("add")?(d(),l(t(u),{key:0,type:"primary"},{default:r(()=>e[15]||(e[15]=[i(" Add ")])),_:1})):f("",!0)]),_:1}),s(t(o),{span:8},{default:r(()=>[e[18]||(e[18]=i(" 删除权限： ")),t(g)("delete")?(d(),l(t(u),{key:0,type:"danger"},{default:r(()=>e[17]||(e[17]=[i(" Delete ")])),_:1})):f("",!0)]),_:1}),s(t(o),{span:8},{default:r(()=>[e[20]||(e[20]=i(" 3秒后切换查看权限： ")),t(g)(t(p.value))?(d(),l(t(u),{key:0,type:"primary"},{default:r(()=>e[19]||(e[19]=[i(" View ")])),_:1})):f("",!0)]),_:1})]),_:1})]),_:1})}}});export{j as default};
