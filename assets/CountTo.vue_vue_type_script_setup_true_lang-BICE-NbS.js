import{p as r,q as w}from"./index-C2kP5Vhq.js";import{y as k,W as q,E,o as v,c as C,w as N,u as F,z as B,A as M,Q as R}from"./vue-chunks-ChjHxF1G.js";const $={class:"count-to"},W=k({__name:"CountTo",props:{startVal:r.number.def(0),endVal:r.number.def(2021),duration:r.number.def(3e3),autoplay:r.bool.def(!0),decimals:r.number.validate(o=>o>=0).def(0),decimal:r.string.def("."),separator:r.string.def(","),prefix:r.string.def(""),suffix:r.string.def(""),useEasing:r.bool.def(!0),easingFn:{type:Function,default(o,c,p,t){return p*(-Math.pow(2,-10*o/t)+1)*1024/1023+c}}},emits:["mounted","callback"],setup(o,{expose:c,emit:p}){const t=o,x=p,m=l=>{const{decimals:s,decimal:i,separator:e,suffix:n,prefix:_}=t;l=Number(l).toFixed(s),l+="";const g=l.split(".");let u=g[0];const h=g.length>1?i+g[1]:"",S=/(\d+)(\d{3})/;if(e&&!w(e))for(;S.test(u);)u=u.replace(S,"$1"+e+"$2");return _+u+h+n},a=q({localStartVal:t.startVal,displayValue:m(t.startVal),printVal:null,paused:!1,localDuration:t.duration,startTime:null,timestamp:null,remaining:null,rAF:null}),b=E(a,"displayValue");v(()=>{t.autoplay&&V(),x("mounted")});const d=C(()=>t.startVal>t.endVal);N([()=>t.startVal,()=>t.endVal],()=>{t.autoplay&&V()});const V=()=>{const{startVal:l,duration:s}=t;a.localStartVal=l,a.startTime=null,a.localDuration=s,a.paused=!1,a.rAF=requestAnimationFrame(f)},A=()=>{a.paused?(D(),a.paused=!1):(y(),a.paused=!0)},y=()=>{cancelAnimationFrame(a.rAF)},D=()=>{a.startTime=null,a.localDuration=+a.remaining,a.localStartVal=+a.printVal,requestAnimationFrame(f)},T=()=>{a.startTime=null,cancelAnimationFrame(a.rAF),a.displayValue=m(t.startVal)},f=l=>{const{useEasing:s,easingFn:i,endVal:e}=t;a.startTime||(a.startTime=l),a.timestamp=l;const n=l-a.startTime;a.remaining=a.localDuration-n,s?F(d)?a.printVal=a.localStartVal-i(n,0,a.localStartVal-e,a.localDuration):a.printVal=i(n,a.localStartVal,e-a.localStartVal,a.localDuration):F(d)?a.printVal=a.localStartVal-(a.localStartVal-e)*(n/a.localDuration):a.printVal=a.localStartVal+(e-a.localStartVal)*(n/a.localDuration),F(d)?a.printVal=a.printVal<e?e:a.printVal:a.printVal=a.printVal>e?e:a.printVal,a.displayValue=m(a.printVal),n<a.localDuration?a.rAF=requestAnimationFrame(f):x("callback")};return c({pauseResume:A,reset:T,start:V,pause:y}),(l,s)=>(B(),M("span",$,R(b.value),1))}});export{W as _};
