var h=(T,g,i)=>new Promise((y,d)=>{var b=l=>{try{c(i.next(l))}catch(p){d(p)}},k=l=>{try{c(i.throw(l))}catch(p){d(p)}},c=l=>l.done?y(l.value):Promise.resolve(l.value).then(b,k);c((i=i.apply(T,g)).next())});import{g as E}from"./index-S0OrgcCI.js";import{u as F}from"./useTable-CKtwdp9S.js";import{_ as P}from"./Table.vue_vue_type_script_lang-C64OFEYZ.js";import"./index-NxKBwJZy.js";/* empty css                    *//* empty css                  *//* empty css               */import{_ as q}from"./Search.vue_vue_type_script_setup_true_lang-DYfdU9qr.js";import{_ as I}from"./ContentWrap.vue_vue_type_script_setup_true_lang-CuvtOuFf.js";import{_ as K}from"./Write.vue_vue_type_script_setup_true_lang-DdgC_ItN.js";import{_ as M}from"./Detail.vue_vue_type_script_setup_true_lang-CnUdG0Cj.js";import{_ as Q}from"./Dialog.vue_vue_type_style_index_0_lang-DsyTkgwV.js";import{_ as n}from"./Button.vue_vue_type_script_setup_true_lang-BHfmYSsv.js";import{l as U}from"./element-plus-BKXXpGCF.js";import{q as W,K as S,P as t,Q as x,W as m,r,t as v,v as Y,S as u,u as a,x as j,T as R,Y as z}from"./vue-chunks-BFNeukf4.js";/* empty css                      *//* empty css                        *//* empty css                */import"./el-radio-button-BjluCJ4-.js";/* empty css                         */import"./Icon-xPrbbwlw.js";/* empty css                  */import"./index-DcW5MnRn.js";import"./Form-BtG_KCbb.js";/* empty css               *//* empty css                        *//* empty css                   *//* empty css                *//* empty css                    */import"./InputPassword-D6FxRkv0.js";import"./style.css_vue_type_style_index_0_src_true_lang-Dn_Sa9ly.js";import"./wang-editor-B87DVY_Q.js";import"./JsonEditor.vue_vue_type_script_setup_true_lang-pFmG2SEB.js";import"./IconPicker-QrMW-Baq.js";import"./useForm-Csp4ilXi.js";import"./useIcon-D-bTD7k0.js";import"./useValidator-Nt61Jv1p.js";import"./index-B5f-tNsF.js";import"./tree-Dgaev6Pi.js";import"./Descriptions-B5j6-tqY.js";const G={class:"mb-10px"},Fe=W({__name:"Role",setup(T){const{tableRegister:g,tableState:i,tableMethods:y}=F({fetchDataApi:()=>h(this,null,function*(){const e=yield E();return{list:e.data.list||[],total:e.data.total}})}),{dataList:d,loading:b,total:k}=i,{getList:c}=y,l=S([{field:"index",label:"序号",type:"index"},{field:"roleName",label:"角色名称"},{field:"status",label:"状态",slots:{default:e=>t(x,null,[t(U,{type:e.row.status===0?"danger":"success"},{default:()=>[e.row.status===1?"启用":"禁用"]})])}},{field:"createTime",label:"创建时间"},{field:"remark",label:"备注"},{field:"action",label:"操作",width:240,slots:{default:e=>{const o=e.row;return t(x,null,[t(n,{type:"primary",onClick:()=>N(o,"edit")},{default:()=>[m("编辑")]}),t(n,{type:"success",onClick:()=>N(o,"detail")},{default:()=>[m("详情")]}),t(n,{type:"danger"},{default:()=>[m("删除")]})])}}}]),p=S([{field:"roleName",label:"角色名称",component:"Input"}]),A=r({}),V=e=>{A.value=e,c()},s=r(!1),w=r(""),f=r(),_=r(""),$=r(),C=r(!1),N=(e,o)=>{w.value=o==="edit"?"编辑":"详情",_.value=o,f.value=e,s.value=!0},L=()=>{w.value="新增",f.value=void 0,s.value=!0,_.value=""},D=()=>h(this,null,function*(){const e=a($);(yield e==null?void 0:e.submit())&&(C.value=!0,setTimeout(()=>{C.value=!1,s.value=!1},1e3))});return(e,o)=>(v(),Y(x,null,[t(a(I),null,{default:u(()=>[t(a(q),{schema:p,onReset:V,onSearch:V},null,8,["schema"]),j("div",G,[t(a(n),{type:"primary",onClick:L},{default:u(()=>[m("新增")]),_:1})]),t(a(P),{columns:l,"default-expand-all":"","node-key":"id",data:a(d),loading:a(b),pagination:{total:a(k)},onRegister:a(g)},null,8,["columns","data","loading","pagination","onRegister"])]),_:1}),t(a(Q),{modelValue:s.value,"onUpdate:modelValue":o[1]||(o[1]=B=>s.value=B),title:w.value},{footer:u(()=>[_.value!=="detail"?(v(),R(a(n),{key:0,type:"primary",loading:C.value,onClick:D},{default:u(()=>[m(" 保存 ")]),_:1},8,["loading"])):z("",!0),t(a(n),{onClick:o[0]||(o[0]=B=>s.value=!1)},{default:u(()=>[m("关闭")]),_:1})]),default:u(()=>[_.value!=="detail"?(v(),R(K,{key:0,ref_key:"writeRef",ref:$,"current-row":f.value},null,8,["current-row"])):(v(),R(M,{key:1,"current-row":f.value},null,8,["current-row"]))]),_:1},8,["modelValue","title"])],64))}});export{Fe as default};
